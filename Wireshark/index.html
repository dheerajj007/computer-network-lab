<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feature File Generator</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
  <div class="container mt-5">
    <h1 class="text-center mb-5">Feature File Generator</h1>

    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="#account">Account</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#rates">Rates</a>
      </li>
    </ul>

    <div class="tab-content mt-3">
      <div class="tab-pane fade show active" id="account">
        <h3>Account Details</h3>
        <div id="account-section">
          <div class="form-group">
            <label>Branch:</label>
            <input type="text" class="form-control" name="branch" required>
          </div>
          <div class="form-group">
            <label>Account ID:</label>
            <input type="text" class="form-control" name="accountId" required>
          </div>
          <!-- Add more account detail fields here -->
        </div>
        <button class="btn btn-primary" onclick="addAccount()">Add Account</button>
        <button class="btn btn-primary" onclick="nextTab('rates')">Next</button>
      </div>

      <div class="tab-pane fade" id="rates">
        <h3>Rates</h3>
        <div id="rate-section">
          <div class="form-group">
            <label>Start Date:</label>
            <input type="date" class="form-control" name="rateStartDate" required>
          </div>
          <div class="form-group">
            <label>End Date:</label>
            <input type="date" class="form-control" name="rateEndDate" required>
          </div>
          <!-- Add more rate detail fields here -->
        </div>
        <button class="btn btn-primary" onclick="addRate()">Add Rate</button>
        <button class="btn btn-primary" onclick="generateFeatureFile()">Generate Feature File</button>
      </div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    let accounts = [];
    let rates = [];

    function addAccount() {
      const accountSection = document.getElementById('account-section');

      const accountDiv = document.createElement('div');
      accountDiv.classList.add('account-detail');

      const branchInput = createInput('text', 'branch', 'Branch', true);
      const accountIdInput = createInput('text', 'accountId', 'Account ID', true);
      // Add more account detail fields here

      accountDiv.appendChild(branchInput);
      accountDiv.appendChild(accountIdInput);
      // Append more account detail fields here

      accountSection.appendChild(accountDiv);
    }

    function addRate() {
      const rateSection = document.getElementById('rate-section');

      const rateDiv = document.createElement('div');
      rateDiv.classList.add('rate-detail');

      const rateStartDateInput = createInput('date', 'rateStartDate', 'Start Date', true);
      const rateEndDateInput = createInput('date', 'rateEndDate', 'End Date', true);
      // Add more rate detail fields here

      rateDiv.appendChild(rateStartDateInput);
      rateDiv.appendChild(rateEndDateInput);
      // Append more rate detail fields here

      rateSection.appendChild(rateDiv);
    }

    function createInput(type, name, label, required) {
      const inputDiv = document.createElement('div');
      inputDiv.classList.add('form-group');

      const inputLabel = document.createElement('label');
      inputLabel.textContent = label;

      const input = document.createElement('input');
      input.type = type;
      input.name = name;
      if (required) {
        input.required = true;
      }
      input.classList.add('form-control');

      inputDiv.appendChild(inputLabel);
      inputDiv.appendChild(input);

      return inputDiv;
    }

    function nextTab(tabId) {
      $('.nav-tabs a[href="#' + tabId + '"]').tab('show');
    }

    function generateFeatureFile() {
      // Retrieve account details
      const accountDetails = Array.from(document.querySelectorAll('.account-detail')).map((account) => {
        const branch = account.querySelector('[name="branch"]').value;
        const accountId = account.querySelector('[name="accountId"]').value;
        // Get more account detail fields here

        return {
          branch,
          accountId,
          // Add more account detail fields here
        };
      });

      // Retrieve rate details
      const rateDetails = Array.from(document.querySelectorAll('.rate-detail')).map((rate) => {
        const rateStartDate = rate.querySelector('[name="rateStartDate"]').value;
        const rateEndDate = rate.querySelector('[name="rateEndDate"]').value;
        // Get more rate detail fields here

        return {
          rateStartDate,
          rateEndDate,
          // Add more rate detail fields here
        };
      });

      // Generate feature file using accountDetails and rateDetails
      console.log('Account Details:', accountDetails);
      console.log('Rate Details:', rateDetails);
    }
  </script>
</body>

</html>